<!doctype html>
<html>
	<head>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
		<script>

			$(document).ready(function(){
        
        function getCharNumber(c) {
          const code = c.toLowerCase().charCodeAt(0);
          if (code >= 97 && code <= 122) return code - 97;
          return -1;
        }

        // Solution 1: count table
        function isPermutationOfPalindrome(str) {
          const table = new Array(26).fill(0);
          for (const c of str) {
            const x = getCharNumber(c);
            if (x !== -1) table[x]++;
          }
          let foundOdd = false;
          for (const count of table) {
            if (count % 2 === 1) {
              if (foundOdd) return false;
              foundOdd = true;
            }
          }
          return true;
        }

        // Solution 2: optimized count
        function isPermutationOfPalindromeOptimized(str) {
          const table = new Array(26).fill(0);
          let countOdd = 0;
          for (const c of str) {
            const x = getCharNumber(c);
            if (x !== -1) {
              table[x]++;
              countOdd += (table[x] % 2 === 1) ? 1 : -1;
            }
          }
          return countOdd <= 1;
        }

        // Solution 3: bit vector
        function isPermutationOfPalindromeBitVector(str) {
          let bitVector = 0;
          for (const c of str) {
            const x = getCharNumber(c);
            if (x !== -1) {
              bitVector ^= (1 << x);
            }
          }
          return bitVector === 0 || (bitVector & (bitVector - 1)) === 0;
        }

        const tests = ["Tact Coa", "racecar", "hello"];

        let output = "<h2>>> CTCI Chapter 1.4 – Palindrome Permutation</h2>";

        tests.forEach(s => {
          output += `"${s}" → `
            + isPermutationOfPalindrome(s) + " | "
            + isPermutationOfPalindromeOptimized(s) + " | "
            + isPermutationOfPalindromeBitVector(s) + "<br>";
        });

        $('#t1').html(output);
			});

		</script>
	</head>
	
	<body>
		<div>
			<p id='t1'></p>
		</div>
	</body>

</html>